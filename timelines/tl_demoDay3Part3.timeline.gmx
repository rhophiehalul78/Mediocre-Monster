<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<timeline>
  <entry>
    <step>1</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Reset crit detection variable
with(obj_critState)
{
    critState = -1;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Shining Dog
with(obj_dog)
{
    d3d_set_fog(true,c_white,0,0);
    audio_play_sound(sfx_swordSwipe,5,0);
    draw_sprite_ext(sprite_index,image_index,x,y,image_xscale,image_yscale,image_angle,c_white,1);    
    instance_create(x,y - 130,obj_effectCritical);    
    d3d_set_fog(false,c_white,0,0);
    isFlashing = true;
}

     
   
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create detection for early input
instance_create(obj_dog.x, obj_dog.y, obj_critCorrect);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>5</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Stop dog's flash
obj_dog.isFlashing = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>11</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Dog slaps
with(obj_dog)
{
    image_speed = 0.6;
    sprite_index = spr_dogSlapRight;   
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Destroy instance for early timing detection and create instance for correct input timing
//with(obj_critEarly)
//{
//    instance_destroy();
//}

//instance_create(obj_dog.x, obj_dog.y, obj_critCorrect);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>21</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Slap sound effect and gob gets slapped
audio_play_sound(sfx_crit,2,0);

with(obj_goblin)
{
    sprite_index = sp_gob_green_crithit;
    image_index = 0;
}

with(obj_dog)
{
    image_speed = 0;
    image_index = 0;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Destroy instance for correct timing detection and create instance for late input timing
with(obj_critCorrect)
{
    instance_destroy();
}

//instance_create(obj_dog.x, obj_dog.y, obj_critLate);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>36</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Reset goblin image to idle
obj_goblin.sprite_index = sp_gob_green_battle;
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
  <entry>
    <step>41</step>
    <event>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Crit checking
var dogDialog = irandom_range(0, 4);

with(obj_goblin)
{
    sprite_index = sp_gob_green_battle;
}

with(obj_dog)
{
switch(obj_critState.critState)
{
    /*case 0:
        switch(dogDialog)
        {
            case 0:
                town_mbox(charbust[0], charname, "Too early.", "L");
                break;
            case 1:
                town_mbox(charbust[0], charname, "Wait for me to shine before you press [SPACE].", "L");
                break;
            case 2:
                town_mbox(charbust[0], charname, "That was premature, Gob.", "L");
                break;
            case 3:
                town_mbox(charbust[0], charname, "Hold your horses. You pressed [SPACE] too early.", "L");
                break;
            case 4:
                town_mbox(charbust[0], charname, "I wasn't ready yet. Don't be too hasty.", "L");
                break;
        }
        break;*/
    case 1:
        obj_critState.successfulAttempts++;
        if (obj_critState.successfulAttempts == 5)
        {
            town_mbox(charbust[0], charname, "Good... good...", "L");
            town_mbox(charbust[0], charname, "You should be ready to face them again.", "L");
            global.storyChapter = storyChapterIndex.Day4_Taunt;
            
            /// Activate cutscene timeline
            with(obj_cutsceneController)
            {
                timeline_index = tl_goToBattle;
                timeline_position = 0;
                timeline_running = true;
            }
            break;
        }
        else
        {
            switch(dogDialog)
            {
                case 0:
                    town_mbox(charbust[0], charname, "Splash! Perfect timing!", "L");
                    break;
                case 1:
                    town_mbox(charbust[0], charname, "I got you good, Gob! That was satisfying.", "L");
                    break;
                case 2:
                    town_mbox(charbust[0], charname, "Nice! You should've seen the look in your face.", "L");
                    break;
                case 3:
                    town_mbox(charbust[0], charname, "Perfect timing! You're a fast learner.", "L");
                    break;
                case 4:
                    town_mbox(charbust[0], charname, "Attagoblin! Nice hit.", "L");
                    break;
            }
            town_mbox(charbust[0], charname, "Here I go again.", "L");
        }
        break;
    default:
        switch(dogDialog)
        {
            case 0:
                town_mbox(charbust[0], charname, "Too late.", "L");
                break;
            case 1:
                town_mbox(charbust[0], charname, "A bit late. Show some excitement!", "L");
                break;
            case 2:
                town_mbox(charbust[0], charname, "Late. Be more alert.", "L");
                break;
            case 3:
                town_mbox(charbust[0], charname, "Too slow.", "L");
                break;
            case 4:
                town_mbox(charbust[0], charname, "A bit late. Press %g[SPACE]%z as soon as I shine.", "L");
                break;
        }
        town_mbox(charbust[0], charname, "Here I go again.", "L");
        break;
}
    
}




</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Reset timeline
with(obj_cutsceneController)
{
    timeline_position = 0;
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </entry>
</timeline>
